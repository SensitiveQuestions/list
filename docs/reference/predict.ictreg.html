<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Predict Method for Item Count Technique — predict.ictreg • list</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">list</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    How-To's
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/getting-started.html">Getting started</a>
    </li>
    <li>
      <a href="../articles/combined-list.html">Combining List Experiments with Direct Questions</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/list-experiment-examples.html">Examples of List Experiments</a>
</li>
<li>
  <a href="../reference/">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="http://endorse.sensitivequestions.org">Endorsement experiments</a>
    </li>
    <li>
      <a href="http://list.sensitivequestions.org">List experiments</a>
    </li>
    <li>
      <a href="http://rr.sensitivequestions.org">Randomized response technique</a>
    </li>
  </ul>
</li>
<li>
  <a href="http://sensitivequestions.org">Sensitive Questions home</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Predict Method for Item Count Technique</h1>
    </div>

    
    <p>Function to calculate predictions and uncertainties of predictions from
estimates from multivariate regression analysis of survey data with the item
count technique.</p>
    

    <pre class="usage"><span class='co'># S3 method for ictreg</span>
<span class='fu'>predict</span>(<span class='no'>object</span>, <span class='no'>newdata</span>, <span class='no'>newdata.diff</span>, <span class='no'>direct.glm</span>,
  <span class='kw'>se.fit</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>interval</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"none"</span>, <span class='st'>"confidence"</span>), <span class='kw'>level</span> <span class='kw'>=</span> <span class='fl'>0.95</span>,
  <span class='kw'>avg</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>sensitive.item</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>Object of class inheriting from "ictreg"</p></td>
    </tr>
    <tr>
      <th>newdata</th>
      <td><p>An optional data frame containing data that will be used to
make predictions from. If omitted, the data used to fit the regression are
used.</p></td>
    </tr>
    <tr>
      <th>newdata.diff</th>
      <td><p>An optional data frame used to compare predictions with
predictions from the data in the provided newdata data frame.</p></td>
    </tr>
    <tr>
      <th>direct.glm</th>
      <td><p>A glm object from a logistic binomial regression
predicting responses to a direct survey item regarding the sensitive item.
The predictions from the ictreg object are compared to the predictions based
on this glm object.</p></td>
    </tr>
    <tr>
      <th>se.fit</th>
      <td><p>A switch indicating if standard errors are required.</p></td>
    </tr>
    <tr>
      <th>interval</th>
      <td><p>Type of interval calculation.</p></td>
    </tr>
    <tr>
      <th>level</th>
      <td><p>Significance level for confidence intervals.</p></td>
    </tr>
    <tr>
      <th>avg</th>
      <td><p>A switch indicating if the mean prediction and associated
statistics across all obserations in the dataframe will be returned instead
of predictions for each observation.</p></td>
    </tr>
    <tr>
      <th>sensitive.item</th>
      <td><p>For multiple sensitive item design list experiments,
specify which sensitive item fits to use for predictions. Default is the
first sensitive item.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>further arguments to be passed to or from other methods.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>predict.ictreg</code> produces a vector of predictions or a matrix
of predictions and bounds with column names fit, lwr, and upr if interval is
set. If se.fit is TRUE, a list with the following components is returned:</p>
<dt>fit</dt><dd><p>vector or matrix as above</p></dd> <dt>se.fit</dt><dd><p>standard error of
prediction</p></dd>

    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>predict.ictreg</code> produces predicted values, obtained by evaluating the
regression function in the frame newdata (which defaults to
<code>model.frame(object)</code>. If the logical <code>se.fit</code> is <code>TRUE</code>,
standard errors of the predictions are calculated. Setting <code>interval</code>
specifies computation of confidence intervals at the specified level or no
intervals.</p>
<p>If <code>avg</code> is set to <code>TRUE</code>, the mean prediction across all
observations in the dataset will be calculated, and if the <code>se.fit</code>
option is set to <code>TRUE</code> a standard error for this mean estimate will be
provided. The <code>interval</code> option will output confidence intervals
instead of only the point estimate if set to <code>TRUE</code>.</p>
<p>Two additional types of mean prediction are also available. The first, if a
<code>newdata.diff</code> data frame is provided by the user, calculates the mean
predicted values across two datasets, as well as the mean difference in
predicted value. Standard errors and confidence intervals can also be added.
For difference prediction, <code>avg</code> must be set to <code>TRUE</code>.</p>
<p>The second type of prediction, triggered if a <code>direct.glm</code> object is
provided by the user, calculates the mean difference in prediction between
predictions based on an <code>ictreg</code> fit and a <code>glm</code> fit from a direct
survey item on the sensitive question. This is defined as the revealed
social desirability bias in Blair and Imai (2010).</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Blair, Graeme and Kosuke Imai. (2012) ``Statistical Analysis of
List Experiments."  Political Analysis, Vol. 20, No 1 (Winter). available at
<a href='http://imai.princeton.edu/research/listP.html'>http://imai.princeton.edu/research/listP.html</a></p>
<p>Imai, Kosuke. (2011) ``Multivariate Regression Analysis for the Item Count
Technique.'' Journal of the American Statistical Association, Vol. 106, No.
494 (June), pp. 407-416. available at
<a href='http://imai.princeton.edu/research/list.html'>http://imai.princeton.edu/research/list.html</a></p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='ictreg.html'>ictreg</a></code> for model fitting</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='fu'>data</span>(<span class='no'>race</span>)

<span class='no'>race.south</span> <span class='kw'>&lt;-</span> <span class='no'>race.nonsouth</span> <span class='kw'>&lt;-</span> <span class='no'>race</span>

<span class='no'>race.south</span>[, <span class='st'>"south"</span>] <span class='kw'>&lt;-</span> <span class='fl'>1</span>
<span class='no'>race.nonsouth</span>[, <span class='st'>"south"</span>] <span class='kw'>&lt;-</span> <span class='fl'>0</span></div><span class='co'># NOT RUN {</span>
<span class='co'># Fit EM algorithm ML model with constraint with no covariates</span>

<span class='no'>ml.results.south.nocov</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='ictreg.html'>ictreg</a></span>(<span class='no'>y</span> ~ <span class='fl'>1</span>,
   <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>race</span>[<span class='no'>race</span>$<span class='no'>south</span> <span class='kw'>==</span> <span class='fl'>1</span>, ], <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"ml"</span>, <span class='kw'>treat</span> <span class='kw'>=</span> <span class='st'>"treat"</span>,
   <span class='kw'>J</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>overdispersed</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>constrained</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>ml.results.nonsouth.nocov</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='ictreg.html'>ictreg</a></span>(<span class='no'>y</span> ~ <span class='fl'>1</span>,
   <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>race</span>[<span class='no'>race</span>$<span class='no'>south</span> <span class='kw'>==</span> <span class='fl'>0</span>, ], <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"ml"</span>, <span class='kw'>treat</span> <span class='kw'>=</span> <span class='st'>"treat"</span>,
   <span class='kw'>J</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>overdispersed</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>constrained</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='co'># Calculate average predictions for respondents in the South </span>
<span class='co'># and the the North of the US for the MLE no covariates </span>
<span class='co'># model, replicating the estimates presented in Figure 1, </span>
<span class='co'># Imai (2010)</span>

<span class='no'>avg.pred.south.nocov</span> <span class='kw'>&lt;-</span> <span class='fu'>predict</span>(<span class='no'>ml.results.south.nocov</span>,
   <span class='kw'>newdata</span> <span class='kw'>=</span> <span class='fu'>as.data.frame</span>(<span class='fu'>matrix</span>(<span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>1</span>)), <span class='kw'>se.fit</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
   <span class='kw'>avg</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>avg.pred.nonsouth.nocov</span> <span class='kw'>&lt;-</span> <span class='fu'>predict</span>(<span class='no'>ml.results.nonsouth.nocov</span>,
   <span class='kw'>newdata</span> <span class='kw'>=</span> <span class='fu'>as.data.frame</span>(<span class='fu'>matrix</span>(<span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>1</span>)), <span class='kw'>se.fit</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
   <span class='kw'>avg</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='co'># Fit linear regression</span>

<span class='no'>lm.results</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='ictreg.html'>ictreg</a></span>(<span class='no'>y</span> ~ <span class='no'>south</span> + <span class='no'>age</span> + <span class='no'>male</span> + <span class='no'>college</span>,
   <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>race</span>, <span class='kw'>treat</span> <span class='kw'>=</span> <span class='st'>"treat"</span>, <span class='kw'>J</span><span class='kw'>=</span><span class='fl'>3</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"lm"</span>)

<span class='co'># Calculate average predictions for respondents in the </span>
<span class='co'># South and the the North of the US for the lm model, </span>
<span class='co'># replicating the estimates presented in Figure 1, Imai (2010)</span>

<span class='no'>avg.pred.south.lm</span> <span class='kw'>&lt;-</span> <span class='fu'>predict</span>(<span class='no'>lm.results</span>, <span class='kw'>newdata</span> <span class='kw'>=</span> <span class='no'>race.south</span>,
   <span class='kw'>se.fit</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>avg</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='no'>avg.pred.nonsouth.lm</span> <span class='kw'>&lt;-</span> <span class='fu'>predict</span>(<span class='no'>lm.results</span>, <span class='kw'>newdata</span> <span class='kw'>=</span> <span class='no'>race.nonsouth</span>,
   <span class='kw'>se.fit</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>avg</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='co'># Fit two-step non-linear least squares regression</span>

<span class='no'>nls.results</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='ictreg.html'>ictreg</a></span>(<span class='no'>y</span> ~ <span class='no'>south</span> + <span class='no'>age</span> + <span class='no'>male</span> + <span class='no'>college</span>,
   <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>race</span>, <span class='kw'>treat</span> <span class='kw'>=</span> <span class='st'>"treat"</span>, <span class='kw'>J</span><span class='kw'>=</span><span class='fl'>3</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"nls"</span>)

<span class='co'># Calculate average predictions for respondents in the South </span>
<span class='co'># and the the North of the US for the NLS model, replicating</span>
<span class='co'># the estimates presented in Figure 1, Imai (2010)</span>

<span class='no'>avg.pred.nls</span> <span class='kw'>&lt;-</span> <span class='fu'>predict</span>(<span class='no'>nls.results</span>, <span class='kw'>newdata</span> <span class='kw'>=</span> <span class='no'>race.south</span>,
   <span class='kw'>newdata.diff</span> <span class='kw'>=</span> <span class='no'>race.nonsouth</span>, <span class='kw'>se.fit</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>avg</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='co'># Fit EM algorithm ML model with constraint</span>

<span class='no'>ml.constrained.results</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='ictreg.html'>ictreg</a></span>(<span class='no'>y</span> ~ <span class='no'>south</span> + <span class='no'>age</span> + <span class='no'>male</span> + <span class='no'>college</span>,
   <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>race</span>, <span class='kw'>treat</span> <span class='kw'>=</span> <span class='st'>"treat"</span>, <span class='kw'>J</span><span class='kw'>=</span><span class='fl'>3</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"ml"</span>,
   <span class='kw'>overdispersed</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>constrained</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='co'># Calculate average predictions for respondents in the South </span>
<span class='co'># and the the North of the US for the MLE model, replicating the </span>
<span class='co'># estimates presented in Figure 1, Imai (2010)</span>

<span class='no'>avg.pred.diff.mle</span> <span class='kw'>&lt;-</span> <span class='fu'>predict</span>(<span class='no'>ml.constrained.results</span>,
   <span class='kw'>newdata</span> <span class='kw'>=</span> <span class='no'>race.south</span>, <span class='kw'>newdata.diff</span> <span class='kw'>=</span> <span class='no'>race.nonsouth</span>,
   <span class='kw'>se.fit</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>avg</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='co'># Calculate average predictions from the item count technique</span>
<span class='co'># regression and from a direct sensitive item modeled with</span>
<span class='co'># a logit.</span>

<span class='co'># Estimate logit for direct sensitive question</span>

<span class='fu'>data</span>(<span class='no'>mis</span>)

<span class='no'>mis.list</span> <span class='kw'>&lt;-</span> <span class='fu'>subset</span>(<span class='no'>mis</span>, <span class='no'>list.data</span> <span class='kw'>==</span> <span class='fl'>1</span>)

<span class='no'>mis.sens</span> <span class='kw'>&lt;-</span> <span class='fu'>subset</span>(<span class='no'>mis</span>, <span class='no'>sens.data</span> <span class='kw'>==</span> <span class='fl'>1</span>)

<span class='co'># Fit EM algorithm ML model</span>

<span class='no'>fit.list</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='ictreg.html'>ictreg</a></span>(<span class='no'>y</span> ~ <span class='no'>age</span> + <span class='no'>college</span> + <span class='no'>male</span> + <span class='no'>south</span>,
   <span class='kw'>J</span> <span class='kw'>=</span> <span class='fl'>4</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mis.list</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"ml"</span>)

<span class='co'># Fit logistic regression with directly-asked sensitive question</span>

<span class='no'>fit.sens</span> <span class='kw'>&lt;-</span> <span class='fu'>glm</span>(<span class='no'>sensitive</span> ~ <span class='no'>age</span> + <span class='no'>college</span> + <span class='no'>male</span> + <span class='no'>south</span>,
   <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mis.sens</span>, <span class='kw'>family</span> <span class='kw'>=</span> <span class='fu'>binomial</span>(<span class='st'>"logit"</span>))

<span class='co'># Predict difference between response to sensitive item</span>
<span class='co'># under the direct and indirect questions (the list experiment).</span>
<span class='co'># This is an estimate of the revealed social desirability bias</span>
<span class='co'># of respondents. See Blair and Imai (2010).</span>

<span class='no'>avg.pred.social.desirability</span> <span class='kw'>&lt;-</span> <span class='fu'>predict</span>(<span class='no'>fit.list</span>,
   <span class='kw'>direct.glm</span> <span class='kw'>=</span> <span class='no'>fit.sens</span>, <span class='kw'>se.fit</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='co'># }</span><div class='input'>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Graeme Blair, UCLA, <a href='mailto:graeme.blair@ucla.edu'>graeme.blair@ucla.edu</a>
and Kosuke Imai, Princeton University, <a href='mailto:kimai@princeton.edu'>kimai@princeton.edu</a>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Graeme Blair, Kosuke Imai.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
